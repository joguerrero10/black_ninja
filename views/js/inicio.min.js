let inicio={salirInstructivo:function(){document.querySelector("#instruccionesTouch").parentNode.removeChild(document.querySelector("#instruccionesTouch"));
},iniciar:function(){if(window.matchMedia("(min-width:1025px)").matches){FB.login(function(i){f();},{scope:"public_profile, email"});function f(){FB.getLoginStatus(function(i){a(i);
});}function a(i){if(i.status==="connected"){b();}else{document.querySelector("#ingresoFacebook").innerHTML+='<div style="color:white; text-align:center">¡Vuelve a intentarlo!</div>';
}}function b(){FB.api("/me?fields=id,name,first_name,email,picture",function(j){let n=new XMLHttpRequest();let l=j.email;let i=j.first_name;let m="http://graph.facebook.com/"+j.id+"/picture?type=large";
let k="views/ajax/usuarios.php";n.open("POST",k,true);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");n.send("identificador="+l+"& primer_nombre="+i+"& foto="+m);
n.onreadystatechange=function(){if((n.readyState==4)&&(n.status==200)){if(n.responseText=="ok"){window.location="inicio";}}};});}}else{if(document.querySelector("#email").value!=""&&document.querySelector("#nombre").value!=""){let h=new XMLHttpRequest();
let e=document.querySelector("#email").value;let c=document.querySelector("#nombre").value;let g="views/img/intro/anonymous.png";let d="views/ajax/usuarios.php";
h.open("POST",d,true);h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");h.send("identificador="+e+"& primer_nombre="+c+"& foto="+g);
h.onreadystatechange=function(){if((h.readyState==4)&&(h.status==200)){if(h.responseText=="ok"){window.location="inicio";}}};}}},cerrarFacebook:function(){FB.getLoginStatus(function(a){if(a.status==="connected"){FB.logout(function(b){setTimeout(function(){window.location="salir";
},500);});}});},compartirFacebook:function(a){let b=a.getAttribute("nombre");FB.ui({method:"share",display:"popup",quote:"¡"+b+" ha gando "+datos.puntaje+" puntos en el nivel "+datos.nivel+", supera su puntaje!",href:"http://tutoriales.byethost10.com/blackninja",},function(c){});
},elegirNivel:function(b){ampliar();datos.nivel=b.getAttribute("nivel");datos.id=b.getAttribute("id");if(screenfull.enabled){screenfull.request(document.querySelector("#contenedor"));
}window.addEventListener("load",function(){window.scrollTo(0,0);});document.addEventListener("touchmove",function(c){c.preventDefault();});datos.sBackground01=document.querySelector("#sBackground01");
datos.sBackground02=document.querySelector("#sBackground02");datos.sBackground03=document.querySelector("#sBackground03");datos.sColisionBalasEnemigo=document.querySelector("#sColisionBalasEnemigo");
datos.sColisionTrampasEnemigos=document.querySelector("#sColisionTrampas-Enemigos");datos.sDisparoEnemigo=document.querySelector("#sDisparoEnemigo");datos.sDisparoJugador=document.querySelector("#sDisparoJugador");
datos.sEnergia=document.querySelector("#sEnergia");datos.sMonedas=document.querySelector("#sMonedas");datos.sSaltoJugador=document.querySelector("#sSaltoJugador");
datos.sPerderVida=document.querySelector("#sPerderVida");datos.sPerder=document.querySelector("#sPerder");datos.sGanar=document.querySelector("#sGanar");
datos.sMonedero=document.querySelector("#sMonedero");datos.sPuntos=document.querySelector("#sPuntos");datos.listaSonidos=document.querySelectorAll("audio");
for(let a=0;a<datos.listaSonidos.length;a++){datos.listaSonidos[a].play();setTimeout(function(){for(let c=0;c<datos.listaSonidos.length;c++){datos.listaSonidos[c].pause();
datos.listaSonidos[c].muted=false;}},100);}inicio.inicioNiveles(datos.nivel);},inicioNiveles:function(l){document.querySelector("#inicio").parentNode.removeChild(document.querySelector("#inicio"));
canvas=document.querySelector("#lienzo");ctx=canvas.getContext("2d");document.querySelector("#carga").style.display="block";datos.colision_trampa=new Image();
datos.jump_left=new Image();datos.jump_right=new Image();datos.run_left=new Image();datos.run_right=new Image();datos.stop_left=new Image();datos.stop_right=new Image();
datos.colisionesBalas=new Image();datos.colisionesBalasEnemigos=new Image();datos.colisionesMonedas=new Image();datos.colisionesTrampas=new Image();datos.monedas=new Image();
datos.trampas=new Image();datos.balasEnemigos=new Image();datos.colision_trampa.src="views/img/jugador/colision_trampa.png";datos.jump_left.src="views/img/jugador/jump_left.png";
datos.jump_right.src="views/img/jugador/jump_right.png";datos.run_left.src="views/img/jugador/run_left.png";datos.run_right.src="views/img/jugador/run_right.png";
datos.stop_left.src="views/img/jugador/stop_left.png";datos.stop_right.src="views/img/jugador/stop_right.png";datos.colisionesBalas.src="views/img/utileria/colisionesBalas.png";
datos.colisionesBalasEnemigos.src="views/img/utileria/colisionesBalasEnemigos.png";datos.colisionesMonedas.src="views/img/utileria/colisionesMonedas.png";
datos.colisionesTrampas.src="views/img/utileria/colisionesTrampas.png";datos.monedas.src="views/img/utileria/monedas.png";datos.trampas.src="views/img/utileria/trampas.png";
datos.balasEnemigos.src="views/img/utileria/balasEnemigos.png";datos.plano3=new Image();datos.plano3.src="views/img/nivel"+l+"/plano3.png";datos.plano2=new Image();
datos.plano2.src="views/img/nivel"+l+"/plano2.png";datos.plano1=new Image();datos.plano1.src="views/img/nivel"+l+"/plano1.png";datos.detalles=new Image();
datos.detalles.src="views/img/nivel"+l+"/detalles.png";if(l==1){let c=new XMLHttpRequest();c.open("GET","views/js/json/bloquesDetallesNivel1.json",true);
}if(l==2){let c=new XMLHttpRequest();c.open("GET","views/js/json/bloquesDetallesNivel2.json",true);}if(l==3){let c=new XMLHttpRequest();c.open("GET","views/js/json/bloquesDetallesNivel3.json",true);
}c.send();c.onreadystatechange=function(){if((c.readyState==4)&&(c.status==200)){datos.bloquesDetalles=JSON.parse(c.responseText);}};datos.texturaPlataforma=new Image();
datos.texturaPlataforma.src="views/img/nivel"+l+"/texturaPlataforma.jpg";if(l==1){let m=new XMLHttpRequest();m.open("GET","views/js/json/bloquesNivel1.json",true);
}if(l==2){let m=new XMLHttpRequest();m.open("GET","views/js/json/bloquesNivel2.json",true);}if(l==3){let m=new XMLHttpRequest();m.open("GET","views/js/json/bloquesNivel3.json",true);
}m.send();m.onreadystatechange=function(){if((m.readyState==4)&&(m.status==200)){datos.bloques=JSON.parse(m.responseText);}};if(l==1){let f=new XMLHttpRequest();
f.open("GET","views/js/json/plataformasNivel1.json",true);}if(l==2){let f=new XMLHttpRequest();f.open("GET","views/js/json/plataformasNivel2.json",true);
}if(l==3){let f=new XMLHttpRequest();f.open("GET","views/js/json/plataformasNivel3.json",true);}f.send();f.onreadystatechange=function(){if((f.readyState==4)&&(f.status==200)){datos.plataforma=JSON.parse(f.responseText);
}};if(l==1){let k=new XMLHttpRequest();k.open("GET","views/js/json/monedasNivel1.json",true);}if(l==2){let k=new XMLHttpRequest();k.open("GET","views/js/json/monedasNivel2.json",true);
}if(l==3){let k=new XMLHttpRequest();k.open("GET","views/js/json/monedasNivel3.json",true);}k.send();k.onreadystatechange=function(){if((k.readyState==4)&&(k.status==200)){datos.posMonedas=JSON.parse(k.responseText);
for(let n=0;n<datos.posMonedas.length;n++){datos.imgMonedas[n]=new Image();datos.imgMonedas[n].src="views/img/utileria/monedas.png";}}};if(l==1){let b=new XMLHttpRequest();
b.open("GET","views/js/json/trampasNivel1.json",true);}if(l==2){let b=new XMLHttpRequest();b.open("GET","views/js/json/trampasNivel2.json",true);}if(l==3){let b=new XMLHttpRequest();
b.open("GET","views/js/json/trampasNivel3.json",true);}b.send();b.onreadystatechange=function(){if((b.readyState==4)&&(b.status==200)){datos.posTrampas=JSON.parse(b.responseText);
for(let n=0;n<datos.posTrampas.length;n++){datos.imgTrampas[n]=new Image();datos.imgTrampas[n].src="views/img/utileria/trampas.png";}}};datos.imgEnemigos=new Image();
datos.imgEnemigos.src="views/img/utileria/enemigos.png";datos.imgBalasEnemigos=new Image();datos.imgBalasEnemigos.src="views/img/utileria/balasEnemigos.png";
for(let g=1;g<=3;g++){if(l==g){let e=new XMLHttpRequest();e.open("GET","views/js/json/enemigosNivel"+g+".json",true);}}e.send();e.onreadystatechange=function(){if((e.readyState==4)&&(e.status==200)){datos.posEnemigos=JSON.parse(e.responseText);
datos.posBalasEnemigos=JSON.parse(e.responseText);}};datos.imgJugador=new Image();datos.imgJugador.src="views/img/jugador/stop_right.png";datos.imgDisparoJugador=new Image();
datos.imgDisparoJugador.src="views/img/utileria/balasJugador.png";datos.plano0=new Image();datos.plano0.src="views/img/nivel"+l+"/plano0.png";let j=[datos.plano0,datos.texturaPlataforma,datos.detalles,datos.plano1,datos.plano2,datos.plano3,datos.imgJugador,datos.imgEnemigos,datos.imgBalasEnemigos,datos.imgDisparoJugador,datos.colision_trampa,datos.jump_left,datos.jump_right,datos.run_left,datos.run_right,datos.stop_left,datos.stop_right,datos.colisionesBalas,datos.colisionesBalasEnemigos,datos.colisionesMonedas,datos.colisionesTrampas,datos.monedas,datos.trampas,datos.balasEnemigos];
let a=0;let d=0;for(let g=0;g<j.length;g++){j[g].addEventListener("load",h);}function h(i){a++;d=100/j.length;document.querySelector("#carga span").innerHTML=Math.ceil(d*a)+"%";
document.querySelector("#carga progress").value=Math.ceil(d*a);if(a==j.length){document.querySelector("#lienzo").style.display="block";document.querySelector("#btnAmpliar").style.display="block";
document.querySelector("#tablero").style.display="block";document.querySelector("#controles").style.display="block";document.querySelector("#carga").style.opacity=0;
setTimeout(function(){document.querySelector("#carga").style.display="none";},10);juego.controles();juego.teclado();juego.tiempo();}}}};